<!DOCTYPE html>
<html>
	<header>
		<title>NodeLib Test</title>
		<meta charset ="UTF-8"/>

		<link rel="stylesheet" type="text/css" href="src/theme.css"/>

		<style type="text/css">
			html {
				overflow: hidden;
			}

			html, body {
				height: 100%;

				margin: 0;
				padding: 0;
			}

			#node-canvas {
				height: 100%;
				width: 100%;
				font-size: 0;

				margin: 0;
				padding: 0;
			}
		</style>

		<script src="src/nodelib.js"></script>
		<script src="src/camera.js"></script>
		<script src="src/connection.js"></script>
		<script src="src/node.js"></script>
		<script src="src/plug.js"></script>
		<script src="src/position.js"></script>
		<script src="src/theme.js"></script>
		<script src="src/tree.js"></script>
		<script src="src/utils.js"></script>
		<script src="src/connectionstyle.js"></script>
		<script src="src/popupoption.js"></script>

		<script>
			function onLoad()
			{
				let canvas = document.getElementById('node-canvas');

				theme = new NodeGraph.Theme();
				tree = new NodeGraph.Tree(canvas, theme);

				let redNode =
				{
					name: 'Color Blend',

					onInit: function(node)
					{
						node.addInput('Color 1');
						node.addInput('Color 2');
						node.addInput('Mix');
						node.addOutput("Color");
					}
				}

				let blueNode =
				{
					name: 'RGB Split',

					onInit: function(node)
					{
						node.addInput('Color');
						node.addOutput('R');
						node.addOutput('G');
						node.addOutput('B');
					}
				}

				tree.addPopupOption('Add', 'Adds a new node.').onclick = event =>
				{
					let x = event.clientX;
					let y = event.clientY;
					let pos = new NodeGraph.Position(x, y, false);
					pos = pos.toWorld(tree.camera);

					tree.addNode(pos, redNode);
				};
			}
		</script>
	</header>
	
	<body onload="onLoad()">
		<canvas id="node-canvas">
			Your browser does not support HTML5 canvas, and is unable to view this web application. We recommend using Firefox or Chrome with JavaScript enabled.
		</canvas>
	</body>
</html>